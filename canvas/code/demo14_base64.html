<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
	</head>
	<body>
		<style type="text/css">
			canvas{
				background: #f5f5f5;
			}
		</style>
		<div class="container">
			<div class="panel panel-primary">
				<div class="panel-heading">知识点：</div>
				<div class="panel-body">
					<p>canvas可以绘制图片。drawImage方法</p>
					<p>必须在img对象加载完成后才能绘制</p>
					<p>
						<pre>
var img=new Image();
img.src="qqb.jpg";
img.onload=function(){
//	ctx.drawImage(img,0,0,300,300)//将图片绘制到canvas的某一个区域
	ctx.drawImage(img,0,0,214,213,0,0,300,300)//将图片的某一个区域绘制到canvas 的某一个区域
}
						</pre>
					</p>
				</div>
			</div>
		</div>
		<div class="container">
			<div class="panel panel-primary">
				<div class="panel-heading">效果：</div>
				<div class="panel-body box">
					
					<form id="form" >
						<input type="text" name="" id="" value="" />
						<input type="submit" name="" id="" value="submit" />						
					</form>
					
				</div>
			</div>
		</div>
	</body>
	<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
	<script type="text/javascript">
		
		//使用canvas标签将图片转换为base64编码-》字符串
//		var cropStr = canvas[0].toDataURL("image/jpeg",0.7)

		ImageToBase('qqb.jpg')
		function ImageToBase(url){
			
			var img=new Image();
			img.src=url;
			
			var canvas=$("<canvas>")[0]
			
			var ctx=canvas.getContext('2d')
			
			img.onload=function(){
				var w=img.width;
				var h=img.height;
				canvas.width=w;
				canvas.height=h;
				
				ctx.drawImage(img,0,0,w,h)
				
				var cropStr = canvas.toDataURL("image/jpeg",0.7);
				
				console.log(cropStr)
				
			}
			
		}
		
		
		function safe(fn){
			ctx.save();
			ctx.beginPath();			
			fn();			
			ctx.closePath();
			ctx.restore();
		}
		
		
		

	</script>
	
</html>
